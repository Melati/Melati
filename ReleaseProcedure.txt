Hello,

The scripts in this directory provide a means of building melati 
and poem using Ant. 
Whilst this works, Melati is normally built using Maven. 

The original ant script was written by kimptoc@techie.com.

HOW TO USE

You need a modern version of ant (1.5 or higher).

If you just type ant you will be given a list of available options. 

To build a distributable copy of Melati just type:

ant build

It will create a directory
   .../dist/ in which the distribution is created.

To run the Melati site on the jetty webserver type:

ant run 

and point your browser at http://localhost:8080/

or to do both just type:

ant go

RELATIONSHIP to MAVEN

In parallel with the above we are migrating to the use of
http://maven.apache.org/. 

Maven is a useful tool for running automated checks, 
unit tests and creating distributions etc. 

However the existing script in this directory works well, 
creates the distribution in a tried and tested manner and 
runs jetty. 

So for the time being both are being used in parallel.

The site src docs are processed to accomodate both: 
ant site creates the xHTML docs, 
ant xdocs creates the maven xdocs

The public versions of the site are all pointing to the 
Maven generated site. 

The scripts in this directory generate the official distributions, 
maven creates the SNAPSHOT distributions.


MAKING A RELEASE

Once you have the scripts working there are a few things you should do
to create a release:

1.  Change the version number and date in build.xml
1a. Remove SNAPSHOT from currentVersion in ../project.xml 
    and increment it. 
2.  If your change requires upgrade action by the user make a note
    in the Upgrading section of melati/README.html
3.  Change Last Updated and Updated By and add a new paragraph to 
    melati/RELEASE-NOTES.html
4.  Add a paragraph about this release to melati/site/docsrc/Releases.ahtml
    Update melati/site/docsrc/Download.ahtml
    Review melati/site/docsrc/Roadmap.ahtml
5.  CVS commit all of the above
    except project.xml
6.  CVS tag this release (cvs tag Melati-0-7-4)
7.  Build melati (again) locally
    cd build
    ant go
    cd ..
    maven clean
    maven site
8.  Test everything
9.  Commit project.xml to initiate a maven build on the server
    Update rama
    cd /dist/melati
    cvs update
    cd build 
    ant build
10. Copy downloadable  jars and zips to 
    cp dist/packaged/*.* /dist/melati/download/
11. Generate Maven site
    cd /dist/melati
    maven site
    maven dist
12. Update sourceforge
cvs -z3 -d:ext:developername@cvs.sourceforge.net:/cvsroot/melati co melati
cvs -d:ext:developername@melati.org:/usr/cvsroot export melati
cvs commit

13. Email 
       melati-announce@lists.sourceforge.net,
       melati-developers@lists.sourceforge.net,
       melati-users@lists.sourceforge.net,

       webmacro-user@lists.sourceforge.net,
       velocity-user@jakarta.apache.org, 

       pgsql-jdbc@postgresql.org,
       java@lists.mysql.com, 
       mckoidb@mckoi.com,
       hsqldb-developers@lists.sourceforge.net,
       wafer-developer@lists.sourceforge.net

14. Notify Melati project boards:
       bibliomania_tech@messageboards.paneris.org
       pol@messageboards.paneris.org
       jammyjoes@messageboards.paneris.org
       begbroke@messageboards.paneris.org
15. Add an item to the Sourceforge news
    https://sourceforge.net/news/submit.php?group_id=11389
16. Add SNAPSHOT to currentVersion in ../project.xml



$Id$








