<html>

<head>
<title>Melati Readme Documentation</title>
</head>



<body bgcolor="white">
<blockquote> 
  <h1 align="center">The Melati Project</h1>
  <h3 align="center">Tim Pizey</h3>
  <h4 align="center"> Last change $Date$, 
                      by $Author$  At melati.org</h4>
  <!-- -----------------------------------------------------

        This document is fairly readable as text, but looks 

        real ugly. It'll be more fun reading it in a browser.

        ----------------------------------------------------- --> 
  <h4>Contents: </h4>
  <ul>
    <li><a href="#About">About Melati</a> 
    <li><a href="#Release">Release Notes</a> 
    <li><a href="#Upgrading">Upgrading</a> 
    <li><a href="#Documentation">Documentation</a> 
    <li><a href="#Licensing">Licensing</a> 
    <li><a href="#Anatomy">Anatomy of this Release</a> 
    <li><a href="#Installing">Installing</a> 
    <li><a href="#Recompiling">Recompiling</a> 
    <li><a href="#Started">Getting Started</a> 
    <li><a href="#Credits">Credits</a> 
  </ul>
  <h2><a id="About" name="About">About Melati</a></h2>
  <p> Melati is a tool for building Java-programmed websites backed by a database. 
    It provides the following features:</p>
  <ul>
    <li> a generic <b>database admin system</b>, allowing the site manager to 
      edit both the contents and the structure of the database through a simple 
      web based interface.</li>
    <li>an object layer where the database is seen as a collection of Java objects, 
      via a (genuinely!) easy-to-use<b> transparent persistence layer</b> on top 
      of JDBC. </li>
    <li>a <b>low level security model</b> allowing restrictions to be placed on 
      tables, rows and fields.</li>
    <li>cookie-based or HTTP-based login provoked automatically by access control 
      failure.</li>
    <li>rapid templating mechanism, using "templets" (sub-templates) for rendering 
      interface elements (e.g. HTML input boxes, dropdowns), and providing an 
      easy interface with persistent objects. 
    <li>close integration with <a href=http://www.webmacro.org>Webmacro</a> and 
      <a href="http://jakarta.apache.org/velocity/">Velocity</a> template engines. 
    </li>
    <li>built in file upload </li>
  </ul>
  <p> Melati's design builds on our experience with previous systems we have deployed 
    successfully on a number of commercial sites: we feel that it enables a particularly 
    elegant and productive way of working. </p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <a name="Release"> 
  <h2 id="Release" name="Release"> Release Notes</h2>
  </a> 
  <p>See the <a href="RELEASE-NOTES.html">release notes</a> for detailed documentation 
    about what has changed. This is the 25rd beta release of Melati, offering 
    the following improvements over Alpha versions of Melati:</p>
  <ul>
    <li>Integration with Maven 1 and 2</li>
    <li>WebMacro templates bundled and readable from within the .jar</li>    
    <li>Support for SQLServer, MySQL, MckoiDB, HSQLDB, MSSQL, Oracle</li>
    <li>Support for JSDK 2.0, 2.1, 2.2, 2.3 (Tomcat)</li>
    <li>Support for <a href="http://jakarta.apache.org/velocity/">Velocity</a></li>
    <li>DSDs can now be imported into other DSDs</li>
    <li>Support for Webmacro 1.1</li>
    <li>Cascading deletion in POEM</li>
    <li>Cleaner servlet API</li>
    <li>File upload</li>
    <li>'Remember me' feature for login.</li>
    <li>Melati Test suite</li>
    <li>Now available as a downloadable zip / tar.gz. </li>
    <li>Precompiled (javac) melati.jar</li>
    <li>Ant build script</li>
    <li>Mailing list hosted on SourceForge</li>
    <li>More documentation.</li>
    <li>Support for <a href="http://eclipse.org/">Eclipse</a></li>
    <li>Maven validation and site generation </li>
    <li>Dual ASF / GPL licensing.</li>
    <li>Poem no longer intertwined with Melati</li>
    <li>Poem Preprocessor now a Maven plugin</li>
    <li>Templets loacated in the same direcory, regardless of template engine</li>
  </ul>
  <p>&nbsp; </p>
  <p> 
  <a name="Upgrading"> 
  <h2 id="Upgrading" name="Upgrading">Upgrading</h2>
  </a> 

  <h3>To upgrade from Melati 0.7.4 to Melati 0.7.5</h3>
  <ol>
    <li> 
  <p>
  Move any templets from, for example,  <tt>org/melati/template/webmacro/template/html</tt> to 
  <tt>org/melati/templets/html</tt>.
  </p>
  </li>
  </ol>
  <h3>To upgrade from Melati 0.7.4 to Melati 0.7.5</h3>
  <ol>
    <li> 
  <p>
   You will need to change references to org.melati.servlet.MelatiContext 
   to org.melati.PoemContext and remove direct access to its members, use
   the setters and getters. 
  </p>
  <p>
   References to MelatiUtil.getFormNulled etc should now use the same methods
   in org.melati.servlet.Form.
  </p>

    </li>
  </ol>
  <h3>To upgrade from Melati 0.7.3 to Melati 0.7.4</h3>
  <ol>
    <li> 
  <p>
  You will need to change <tt>melati-static</tt> to point to 
  <tt>/dist/melati/src/main</tt>.
  </p>
    </li>
  </ol>
  <h3>To upgrade from Melati 0.7.1 to Melati 0.7.3</h3>
  <ol>
    <li> 
      <p>
       This release refactors the source tree so you should change 
       <tt>melati-static</tt> to point to <tt>...melati/src/main/org/melati</tt>
      </p>
      <p>
       You can now use webmacro templates inside the Melati jar, so
       have no need for a duplicate set of templates outside the jar.
      </p>
    </li>
  </ol>
  <h3>To upgrade from Melati 0.7.0 to Melati 0.7.1</h3>
  <ol>
    <li> 
      <p>
       This release adds support for BigDecimal types.
       This requires the addition of two fields to the field 
       meta data: <tt>scale</tt> and <tt>precision</tt>.
       Consequently existing <tt>columninfo</tt> and <tt>setting</tt> 
       tables need to be altered. 
       The easiest way is just to drop these tables and allow Melati to
       recreate them.
       Unless your settings are <tt>ensure</tt>d you will have to reenter them.

       If you are running postgresql 7.3 or higher you should be able to 
       do the following instead:
<pre>
ALTER TABLE setting ADD COLUMN scale int;
ALTER TABLE setting ADD COLUMN precision  int;
ALTER TABLE setting ALTER COLUMN scale SET NOT NULL;
ALTER TABLE setting ALTER COLUMN precision SET NOT NULL;
</pre>

      </p>
    </li>
  </ol>
  <h3>To upgrade from Melati 0.6.* to Melati 0.7.0</h3>
  <ol>
    <li> 
      <p>
       You will have to upgrade your Postgresql installation to at least 7.3, 
       so as to use the driver supplied with Melati. Note that recent versions
       of Postgresql require a character set to be specified at db
       creation time. 
      </p>
    </li>
  </ol>
  <h3>To upgrade from Melati 0.55.* to Melati 0.6.*</h3>
  <ol>
    <li> 
      <p>
       No known upgrade issues - working with Postgres 7.1, 
       WebMacro 1.0, Velocity 1.2, MySQL-Max 3.23.49
      </p>
    </li>
  </ol>
  <h3>To upgrade from Melati 0.54.* to Melati 0.55.*</h3>
  <ol>
    <li> 
      <p>
       You should upgrade to WebMacro 0.98p1. This has improvements to whitespace 
        handling, and fixes a bug where some Parse Exceptions where thrown as 
        Errors, causing Internal Server Errors, and not tidying up Poem Transaction</p>
    </li>
    <li>if you have specialised org/melati/error.wm for your site, you will have 
      to rename your version to org/melati/template/webmacro/templets/html/error/java.lang.Exception.wm 
    </li>
  </ol>
  <p>&nbsp;</p>
  <h3>To upgrade from Melati 0.53.5 to Melati 0.54, 0.54.1 or 0.54.2</h3>
  <ol>
    <li>You must upgrade to WebMacro 0.98.</li>
    <li>If you construct your own FastWriter, you need to supply a Broker to the 
      constructor.</li>
    <li>If you use a PassbackExceptionHandler (in order to render AccessPoemExceptions 
      inline in the page), you will need to set it by using: <tt>$melati.setVariableExceptionHandler($melati.PassbackVariableExceptionHandler) 
      </tt>in your templates.</li>
  </ol>
  <h3>&nbsp;</h3>
  <p> </p>
  <h3>To upgrade from Melati 0.53.4 to Melati 0.53.5</h3>
  <p> </p>
  <h3>You will probably not need to make any changes, but you should be aware 
    of the following:</h3>
  <p>1) We no longer provide a getXxxxDatabase() function in each Table and Persistent. 
    Instead you should either just use getDatabase() or you can use getXxxxDatabaseTables() 
    to access tables specific to your project. In particular, getPoemDatabase() 
    is no longer available in the Poem tables/persisents. So if you call getPoemDatabase() 
    in your code, you should change it one of getDatabase() or getPoemDatabaseTables(). 
    Similarly, if you re-run DSD on your project Xxxx then you will need to handle 
    any calls to getXxxxDatabase(). You can either change them to getXxxxDatabaseTables(), 
    getDatabase(), or you can add the old function into your non-generated files: 
    e.g. in MyTable.java add:</p>
  <pre> XxxxDatabase getXxxxDatabase() { 

    (XxxxDatabase)getDatabase();

 }</pre>
  <p> 2) I have tested this on several databases and although I am fairly confident 
    that it should work, IF YOU RE-RUN DSD ON YOUR OWN DATABASES YOU MAY EXPERIENCE 
    PROBLEMS.</p>
  <p> 3) Your .dsd file must live in the same directory as your compiled code 
    because it is loaded as a Resource. </p>
  <p>&nbsp;</p>
  <h3>To upgrade from Melati 0.53.3 to Melati 0.53.4</h3>
  <ul>
    <li>you must install the 0.95b3 webmacro snapshot</li>
  </ul>
  <h3>&nbsp;</h3>
  <h3>To upgrade from Melati 0.53.2.1 to Melati 0.53.3</h3>
  <ul>
    <li>you must install the 2000-12-06 webmacro snapshot</li>
  </ul>
  <p>&nbsp;</p>
  <h3>To upgrade from Melati 0.52 to Melati 0.53</h3>
  <ul>
    <li>you must install version 0.94 (at least) of webmacro</li>
    <li> if your code overrides `Persistent.deleteAndCommit(), please read the 
      <a href="RELEASE-NOTES.html">Release Notes</a>.</li>
  </ul>
  <h3>&nbsp;</h3>
  <h3>To upgrade from Melati 0.50 to Melati 0.52</h3>
  <ul>
    <li>your Webmacro based servlets should now extend org.melati.template.webmacro.WebmacroTemplateServlet, 
      and return a String represtation of the Template name, not the actual template. 
    </li>
    <li>If you override any templets, they will need to move to the /template/webmacro/templets 
      directory. </li>
    <li> 
      <p>You will need to add the following line to<tt> org.melati.Melatiservlet.properties</tt></p>
      <p><tt>org.melati.MelatiServlet.templateEngine=org.melati.template.webmacro.WebmacroTemplateEngine 
        </tt></p>
      <p>Also, if you have an entry for TempletLoader, it should now read:</p>
      <p><tt>org.melati.MelatiServlet.templetLoader=org.melati.template.ClassNameTempletLoader 
        </tt></p>
      <p>And javascriptLibraryURL should read</p>
      <p><tt>org.melati.MelatiServlet.javascriptLibraryURL=/melati-static/template/webmacro/templets/html</tt></p>
    </li>
  </ul>
  <p>&nbsp;</p>
  <h3>To upgrade from Melati Alpha Releases to Melati 0.50</h3>
  <p>As this is the 1st beta release, please follow the <a href="README.html#Installation">Installation 
    instructions</a>.</p>
  <p></p>
  <p>&nbsp;</p>
  <h2><a id="Documentation" name="Documentation">Documentation</a></h2>
  Documentation for Melati can be found on the website, and on the Melati page 
  at SourceForge. This README is just an overview. 
  <p> 
  <ul>
    <li><a href="http://www.melati.org">Melati Website</a> 
    <li><a href="http://www.sourceforge.net/projects/melati">Melati SourceForge 
      Page</a> 
  </ul>
  <p>The <a href="/javadoc/">Java Doc API's</a>, is included with this release.</p>
  <p>We strongly recommend joining the <a href="http://lists.sourceforge.net/mailman/listinfo/melati-users">Melati 
    Users mailing list</a></p>
  <p>If you are interested in contributing code to Melati, please also join the 
    <a href="http://lists.sourceforge.net/mailman/listinfo/melati-developers">Melati 
    Developers mailing list</a>.</p>
  <p>If you simply want to be kept up-to-date with announcements, please join 
    the low traffic <a href="http://lists.sourceforge.net/mailman/listinfo/melati-announce">Melati 
    Announcements mailing list.</a></p>
  <p> If you are looking for support, found a bug, have a suggestion, or just 
    want to chat with the developers, use the Melati developers or Melati Users 
    mailing list. 
  <p>&nbsp; 
  <h2><a id="Licensing" name="Licensing"></a>Licensing</h2>
  <p> Melati is free software; Permission is granted to copy, distribute and/or 
    modify this software under the terms either:<br>
  </p>
  <p> a) the GNU General Public License as published by the Free Software Foundation; 
    either version 2 of the License, or (at your option) any later version.</p>
  <p> or<br>
    <br>
    b) any version of the Melati Software License.</p>
  <p>&nbsp;</p>
  <p>The GNU General Public License version 2 is <a href="LICENSE-GPL.txt">included 
    in this snapshot</a>, and is available <a href="http://www.gnu.org/copyleft/gpl.txt">online</a>.</p>
  <p>The Melati Software License is compatible with the <a href="http://www.apache.org/LICENSE.txt">Apache 
    Software Foundation's</a> <a href="http://www.apache.org/LICENSE.txt">Apache 
    Software License.</a> It is <a href="LICENSE-MSL.txt">included in this snapshot</a> 
    , and is available online at <a href="http://melati.org">http://melati.org.</a></p>
  <p><br>
  </p>
  <a name="Anatomy"> 
  <h2 id="Anatomy" name="Anatomy">Anatomy of this Release</h2>
  </a> 
  <ul>
    <li> /doc - contains the API documentation</li>
    <li> /lib - contains melati.jar, compiled using JDK 1.2 JAVAC </li>
    <li> /src - contains the melati sources (in src.zip), and additional files 
      (*.wm, *.html, *.gif and *.js) in the org/melati/* tree.</li>
  </ul>
  <p>&nbsp;</p>
  <h2><a id="Installing" name="Installing"></a>Installation</h2>
  <p> This document describes how to install the system on a new machine. </p>
  <h3> Prerequisites </h3>
  <h4> Hardware</h4>
  <p> Since Melati is written entirely in Java, it is portable relatively easily 
    to any machine which supports the JVMs mentioned below. </p>
  <h4> Software</h4>
  <p> Melati has been proved to work in the following environments:</p>
  <table width="75%" border="1" cellspacing="0" cellpadding="5">
    <tr> 
      <td>Operating System</td>
      <td> 
        <ul>
          <li>Linux 2.4 with glibc 2.2, 2.2.12 with glibc 2.1.1, 2.0.34/i586 with 
            glibc 2.0.7.</li>
          <li>Win2000 | WinNT/i586</li>
        </ul>
      </td>
    </tr>
    <tr> 
      <td>Web Server / Servlet Engine</td>
      <td> 
        <ul>
          <li>Apache&nbsp;1.3.12 / JServ&nbsp;1.1 <i>(</i>Apache&nbsp;1.3.14 / 
            Tomcat&nbsp;3.2.1 <i>works but hasn't yet been used for a production 
            deployment)</i> 
          <li>MS IIS 4.0 / Apache Tomcat 3.1 </li>
        </ul>
      </td>
    </tr>
    <tr> 
      <td>JDK</td>
      <td> 
        <blockquote> 
          <p>1.2, 1.3 </p>
        </blockquote>
      </td>
    </tr>
    <tr> 
      <td>JSDK</td>
      <td> 
        <blockquote> 2.0, 2.2 <i>(thanks to a slight hack you can run, and recompile, 
          Melati against either version interchangeably)</i>, 2.3 
        </blockquote>
      </td>
    </tr>
    <tr> 
      <td>Database</td>
      <td> 
        <blockquote>
          <ul>
            <li>PostgreSQL 7.0 (and up)</li>
            <li>MySQL</li>
            <li>HSQLDB</li>
            <li>McKoiDB</li>
          </ul>
        </blockquote>
      </td>
    </tr>
    <tr> 
      <td>Template Engine</td>
      <td> 
        <blockquote>
          <a href=http://www.webmacro.org>Webmacro</a> 
          0.98p1 and up, <a href="http://jakarta.apache.org/velocity/">Velocity</a> 
          1.1 and up</blockquote>
      </td>
    </tr>
  </table>
  <p>
    The JDBC facilities used by Melati are pretty simple, and we are aiming for 
    compatibility with any DBMS which supports JDBC and transactions, but for 
    now Postgresql is what we use.
  </p>
  <p>
    We expect Melati to run in most Servlet Environments (we just havn't tested 
    them all yet :)
   </p>
  <h3><!-- ============== --> Step by step Installation <!-- ============== --> 
  </h3>
  <p>
    It is assumed that you already have a working installation of <a href="http://www.webmacro.org">Webmacro</a> 
    (<i>i.e.</i> web server, servlet runner, and Webmacro classes), and a working 
    installation of <a href="http://www.postgresql.org">Postgres</a> or, presuming 
    compatibility, another RDBMS. </p>
  <p>
    It is assumed you are installing from the Melati Package. If you would like 
    to build melati yourself from the CVS sources, please use the installation 
    doc available from <a
    href="http://melati.org">http://melati.org</a>.
  </p>
  <table width="0%" border="0" cellpadding="10" cellspacing="0">
    <tr> 
      <td valign="top">1.</td>
      <td>Set up a database for use by Melati. With Postgres this involves typing, 
        for example, <tt>createdb melatitest</tt> at the Linux prompt, as a user 
        who is allowed to create databases. </td>
    </tr>
    <tr> 
      <td valign="top">2.</td>
      <td>Arrange for the user in whose name your httpd runs---often, `<tt>nobody</tt>'---to 
        be able to connect to the test database and create tables in it. With 
        Postgres this is a no-op under the default `security' setup, assuming 
        that your postmaster is running on the same machine as your web server. 
      </td>
    </tr>
    <tr> 
      <td valign="top">3.</td>
      <td>
        Download the latest Melati snapshot from 
        <a href="http://www.melati.org">www.melati.org</a>, 
        and unzip or untar it. eg: 
        <ul>
          <li>Unix users type: 
            <ul>
              <li><tt>cd /usr/local/</tt></li>
              <li> <tt>tar -xzf melati_0.54.tar.gz</tt></li>
              <li>for convenience, create a soft link: <tt>ln -s melati_0.54 melati 
                </tt></li>
            </ul>
          </li>
          <li>Windows users should use WinZip</li>
        </ul>
      </td>
    </tr>
    <tr> 
      <td valign="top">4.</td>
      <td  valign=top> 
        <p><a name="6"></a>Arrange for Melati's classes and properties files to 
          be accessible to your servlet runner. </p>
        <p>For Apache Jserv, this can be done either in the <tt>jserv.properties</tt> 
          file, by adding a lines</p>
        <blockquote> 
          <pre>
wrapper.classpath=/usr/local/melati/lib/melati.jar<br>wrapper.classpath=/usr/local/melati/src/</pre>
        </blockquote>
        <p>or in your <tt>&lt;zone&gt;.properties</tt> file by adding </p>
        <blockquote> 
          <pre>/usr/local/melati/lib/melati.jar,/usr/local/melati/src/</pre>
        </blockquote>
        <p>to the line beginning <tt>repositories=</tt></p>
        <p>&nbsp;</p>
      </td>
    </tr>
    <tr> 
      <td valign="top">5.</td>
      <td  valign=top> 
        <p>Arrange for Melati's statically served pages to be accessible via your 
          web server.</p>
        <p></p>
        <p> By default, Melati will expect to find its JavaScript, images and 
          static HTML under <tt>http://your.server/melati-static</tt>. To set 
          this up with Apache, one typically does something like </p>
        <blockquote> 
          <pre>

ln -s /usr/local/melati/src/org/melati /usr/local/apache/htdocs/melati-static

</pre>
        </blockquote>
        <p> An alternate URL can be specified in the configuration file <tt>src/org/melati/org.melati.MelatiServlet.properties</tt>. 
        </p>
      </td>
    </tr>
    <tr> 
      <td valign="top">6.</td>
      <td  valign=top> 
        <p>Set the path allowing your application to access the Melati templates. 
          Melati looks for its templates relative to <tt>src/org/melati</tt> in 
          its source tree, so you should edit your template path accordingly:</p>
        <p>6.1 For Webmacro:</p>
        <blockquote> 
          <p>By default Webmacro will load templates from the CLASSPATH, so the 
            easiest thing to do is add something like </p>
          <p><tt>wrapper.classpath=/usr/local/melati/src/org/melati/ </tt></p>
          <p>to your ServletRunner's CLASSPATH. Alternatively, set the path in 
            your <tt>WebMacro.properties</tt> file.</p>
        </blockquote>
        <p>6.2 For Velocity </p>
        <ol>
          <li>in <tt>org.melati.MelatiServlet.properties</tt>, Specify Velocity 
            as your Template Engine:<br>
            <tt>org.melati.MelatiServlet.templateEngine=org.melati.template.velocity.VelocityTemplateEngine 
            </tt><br>
          </li>
          <li>you should set your TemplatePath in <tt>org.melati.MelatiServlet.properties</tt>: 
            <tt>org.melati.MelatiServlet.templatePath=/usr/local/packages/melati/org/melati/ 
            </tt></li>
        </ol>
      </td>
    </tr>
    <tr> 
      <td valign="top">7.</td>
      <td  valign=top> 
        <p> <a name=config>Edit Melati's database config file</a>, found in the 
          source tree as <tt>org/melati/org.melati.LogicalDatabase.properties</tt>, 
          which describes the mapping from &quot;logical database names&quot; 
          to JDBC connection details. You may not have to change anything. </p>
        <p> If you wish, you can also edit <tt>org.melati.MelatiServlet.properties</tt> 
          (in the same directory) to choose between a login mechanism based on 
          servlet sessions (<i>i.e.</i> cookies, which is the default) and one 
          based on HTTP Basic Authorization (commonly used for password-protecting 
          static pages).</p>
      </td>
    </tr>
    <tr> 
      <td valign="top">8.</td>
      <td  valign=top>Restart your Servlet Runner, typically you will need to 
        kick apache using <tt>apachectl restart</tt>.</td>
    </tr>
    <tr> 
      <td valign="top">9.</td>
      <td  valign=top> 
        <p>To check that Melati is working, try looking at </p>
        <blockquote> 
          <pre>

http://localhost/&lt;servlet zone&gt;/org.melati.test.ConfigServletTest/

</pre>
        </blockquote>
        <p> This is the 1st servlet in the Melati Test suite. the test suite demonstrates 
          some of the features of melati, and gives you access to examples. It 
          will also help you debug your installation. If you are asked to supply 
          a username/password, please use _administrator_ / FIXME (and don't forget 
          to change this before you launch your application).</p>
      </td>
    </tr>
  </table>
  <p>&nbsp;</p>
  <h2><a id="Recompiling" name=Recompiling>Recompiling</a></h2>
  <p> If all the necessary libraries (see <A HREF=#compdeps>below</A>) are in 
    your classpath, you can recompile Melati so: </p>
  <blockquote> 
    <pre>
cd src/org/melati
javac `find -name '*.java'`
  </pre>
  </blockquote>
  <p> For a typical installation using webmacro rather than Velocity or JTemplater, 
    install <A HREF=#postgresql.jar>our postgresql jar</A> and try this: </p>
  <blockquote> 
    <pre>
cd src/org/melati
rm -rf template/velocity template/jtemplater poem/odmg
javac `find -name '*.java'`
  </pre>
  </blockquote>
  <p> Thanks to Chris Kimptoc, there is also a build script for <A
    HREF=http://jakarta.apache.org/ant/ >ANT</A> in <A HREF=build
    ><TT>org/melati/build</TT></A>. </p>
  <p> The code should compile cleanly with any compiler (<TT>jikes</TT> is very 
    nice and fast!), except for complaints about "deprecated APIs", which arise 
    from some classes implementing JSDK&nbsp;2.0 methods now marked as <TT>@deprecated</TT>. 
    If anything worse happens with your compiler we would like to know. </p>
  <p> If you change <A HREF=poem/Poem.dsd ><TT>Poem.dsd</TT></A> (you probably 
    shouldn't), don't forget to rerun the <A
    HREF=poem/prepro/doc/UserGuide.html >DSD preprocessor</A>: </p>
  <blockquote> 
    <pre>
cd src/org/melati/poem
java org.melati.poem.prepro.DSD Poem.dsd
cd src/org/melati
javac `find -name '*.java'`
  </pre>
  </blockquote>
  <p> <A NAME=compdeps>The full list of compilation dependencies</A> is </p>
  <UL>
    <LI> 
      <P> <TT>src/</TT> from the Melati distribution, not only for <A
      HREF=.><TT>org.melati</TT>...</A> but also for a couple of utility classes 
        in <A HREF=../apache/java/lang/
      ><TT>org.apache.java.lang</TT></A> and a stub in <A
      HREF=../../javax/servlet/ ><TT>javax.servlet</TT></A> (enabling us to compile 
        and run interchangeably against JSDK 2.0 and&nbsp;2.2) </P>
    </LI>
    <LI> 
      <P> The Servlet Development Kit (JSDK) 2.0 or&nbsp;2.2, generally <TT>jsdk.jar</TT>. 
        Melati will compile and run against either version. </P>
    </LI>
    <LI> 
      <P> The webmacro template engine, <I>e.g.</I> <TT>webmacro.jar</TT> from 
        the appropriate distribution. You need this even if you intend to use 
        Velocity, because of the Velocity-Webmacro compatibility mode. </P>
    </LI>
    <LI> 
      <P> The Velocity template engine, <I>e.g.</I> <TT>velocity-<I>#</I>.jar</TT> 
        from the appropriate distribution. </P>
      <P> If you do not intend to use Velocity, you can just delete <A
      HREF=template/velocity/ ><TT>org/melati/template/velocity/</TT></A> from 
        the Melati source tree. </P>
    </LI>
    <LI> 
      <P> The JTemplater template engine. </P>
      <P> If you do not intend to use JTemplater (you probably don't), you can 
        just delete <A HREF=template/jtemplater/
      ><TT>org/melati/template/jtemplater/</TT></A> from the Melati source tree. 
      </P>
    </LI>
    <LI> 
      <P> <A NAME=postgresql.jar>The Postgresql JDBC driver</A>, <I>e.g.</I> <A
      HREF=poem/postgresql/required-libs/postgresql-7.0-fixedTimestampAndReceiveString.jar
      ><TT>org/melati/poem/postgresql/required-libs/postgresql-7.0-fixedTimestampAndReceiveString.jar</TT></A>, 
        or <TT>postgresql.jar</TT> from the appropriate distribution. The former 
        has some performance fixes which greatly reduce the time taken for Melati 
        to start up, as well as fixes to the way "<TT>TIMESTAMP</TT>" fields are 
        marshalled which may be required under some circumstances. </P>
      <P> If you do not intend to use Postgresql, you can just delete <A
      HREF=poem/postgresql/ ><TT>org/melati/poem/postgresql</TT></A> and <A
      HREF=poem/dbms/Postgresql.java
      ><TT>org/melati/poem/dbms/Postgresql.java</TT></A> from the Melati source 
        tree. </P>
    </LI>
    <LI> 
      <P> The ODMG library included in the Melati sources as <A HREF=poem/odmg/required-libs/odmg3.jar
      ><TT>org/melati/poem/odmg/required-libs/odmg3.jar</TT></A>. </P>
      <P> If you do not intend to use the ODMG interface, you can just delete 
        <A
      HREF=poem/odmg/ ><TT>org/melati/poem/odmg</TT></A> from the Melati source 
        tree. </P>
    </LI>
  </UL>
  <P> You can obtain a bleeding edge snapshot of Melati by anonymous CVS. Make 
    sure to join the <A
    HREF="http://lists.sourceforge.net/mailman/listinfo/melati-developers"
    ><TT>melati-developers</TT></A> mailing list. With the standard Unix <TT>cvs</TT> 
    client you need to do something like </P>
  <BLOCKQUOTE> 
    <PRE>
$ mkdir melati/src
$ cd melati/src
$ cvs -d :pserver:anonymous@melati.org:/usr/cvsroot login
(Logging in to anonymous@melati.org)
CVS password: anonymous
$ cvs -d :pserver:anonymous@melati.org:/usr/cvsroot checkout org/melati org/apache javax
  </PRE>
  </BLOCKQUOTE>
  <P> Thereafter you will be able to get an updated snapshot by doing 
  <BLOCKQUOTE> 
    <PRE>
$ cd melati/src/org/melati
$ cvs update
  </PRE>
  </BLOCKQUOTE>
  (CVS remembers the server from which the tree came in the control files in the 
  <tt>CVS</tt> subdirectories it creates, and the login/password you gave in a 
  file <tt>.cvspass</tt> in your home directory.) 
  <P> For a Windows CVS client, try <A HREF=http://www.wincvs.org
    >www.wincvs.org</A>. Point it at the repository <TT>/usr/cvsroot</TT> on <TT>melati.org</TT>, 
    give username and password <TT>anonymous</TT>, and make sure to check out 
    the modules <TT>org/melati</TT>, <TT>org/apache</TT> and <TT>javax</TT>. </P>
  <P> If you are working over a slow link, you might find the <a
    href=http://rsync.samba.org/rsync/><tt>rsync</tt></a> program useful; let 
    us know if you would like &quot;anonymous rsync&quot; access. </P>
  <h3>&nbsp; </h3>
  <p> 
  <h2 id="Started" name="Started">Getting Started </h2>
  <p>For the time being, please read the Poem User Guide and Preprocessor User 
    Guide on <a href="http://melati.org">http://melati.org</a>. You can also find 
    a simple example application in /lib/example.zip. You can see this application 
    working as part of the Melati Test suite:</p>
  <pre>http://localhost/&lt;servlet zone&gt;/org.melati.test.ConfigServlet/</pre>
  <p>Please ask for help on the mailing lists..</p>
  <p>&nbsp;</p>
  <p> 
  <a name="Credits"> 
  <h2 id="Credits" name="Credits">Credits</h2>
  </a> Melati it the 3rd iteration of similar software developed by Paneris <a href="(http://www.paneris.org">(http://www.paneris.org</a>), 
  and was largely written by William Chesters. 
  <p> 
    The core developers are listed in the <a href="CREDITS.txt">CREDITS</a> 
    file. If you would like to join the Melati Project you are more 
    than welcome. 
    Please join the Developers Mailing list. 
    Anyone demonstrating reasonable ability 
    will be granted write access to the CVS repository. 
</blockquote>

</body>
</html>

