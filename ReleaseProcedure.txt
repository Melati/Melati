Hello,

The scripts in this directory provide a means of building melati 
and poem using Ant. 

The original ant script was written by kimptoc@techie.com.

HOW TO USE

You need a modern version of ant (1.5 or higher).

If you just type ant you will be given a list of available options. 

To build a distributable copy of Melati just type:

ant build

It will create a directory
   .../dist/ in which the distribution is created.

To run the Melati site on the jetty webserver type:

ant run 

and point your browser at http://localhost:8080/

or to do both just type:

ant go

RELATIONSHIP to MAVEN

In parallel with the above we are migrating to the use of
http://maven.apache.org/. 

Maven is a useful tool for running automated checks, 
unit tests and creating distributions etc. 

However the existing script in this directory works well, 
creates the distribution in a tried and tested manner and 
runs jetty. 

So for the time being both are being used in parallel.

The site src docs are processed to accomodate both: 
ant site creates the xHTML docs, 
ant xdocs creates the maven xdocs

The maven generated site can be viewed at 
http://maven.melati.org/
the normal site at http://www.melati.org/

The scripts in this directory generate the official distributions, 
maven creates the SNAPSHOT distributions.


MAKING A RELEASE

Once you have the scripts working there are a few things you should do
to create a release:

1.  Change the version number and date in build.xml
1a. Remove SNAPSHOT from currentVersion in ../project.xml 
    and increment it. 
2.  If your change requires upgrade action by the user make a note
    in the Upgrading section of melati/README.html
3.  Change Last Updated and Updated By and add a new paragraph to 
    melati/RELEASE-NOTES.html
4.  Add a paragraph about this release to melati/site/docsrc/Releases.ahtml
5.  CVS commit all of the above
6.  CVS tag this release (cvs tag Melati-0-7-1)
7.  Build melati (again) locally
8.  Test everything
9.  Update ganesh
    cd /inst/melati
    cvs update
    cd build 
    ant build
10. Copy downloadable  jars and zips to 
    cp dist/packaged/*.* /home/apache/share/htdocs/melati/download/
11. Generate Maven site
    cd /inst/melati
    maven site:generate
12. Email 
       melati-announce@lists.sourceforge.net,
       melati-developers@lists.sourceforge.net,
       webmacro-user@lists.sourceforge.net,
       velocity-user@jakarta.apache.org, 
       pgsql-jdbc@postgresql.org,
       java@lists.mysql.com, 
       mckoidb@mckoi.com,
       hsqldb-developers@lists.sourceforge.net
       jetty-discuss@yahoogroups.com
       users@maven.apache.org

13. Notify Melati project boards:
       bibliomania_tech@messageboards.paneris.org
       pol@messageboards.paneris.org
       ftc@messageboards.paneris.org
       apw@messageboards.paneris.org
       gtl@messageboards.paneris.org
       jammyjoes@messageboards.paneris.org
14. Add SNAPSHOT to currentVersion in ../project.xml



$Id$








